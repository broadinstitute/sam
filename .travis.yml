jdk:
  - oraclejdk8

language: scala

scala:
  - 2.12.2

sudo: required

env:
  global:
  - secure: PsawDZJoiUG+kRlyVLkEhy/2JQTcljXiCSIhZQSLXENdQZ+ZGYefovUbMP+OTcM83f1jsjzsYJ2U10Mmx29Zrqk7QujuNm/Dksx+komh6Vzqjtzj2rHjNeJtERxi+xTXjj5+edIuhy8Jw7jw3qzNV03cXBewsLvDJDh5ONr3YZpgkHLpUpv2CxSTtnHnCJNAJMc6247ma5CsoqbgVpcP5raai87RlRurmJkTUsoLU9IADzq3hFlOR0hkEFDMqhNtlLSybOXQAxIPPNlqP1YiIyVEEnL923fE5qgYT2xZOEbL7CUbi0oiKVZfSXC8BxMq4QZo2IwcdJDp+wlVEs57fZokTpEAJjNRNF/1/NBfdtiyLS3cejzNw1+/aFCPSxPm+UVXxvrP/I/FTD7pFyH6oFZIBq4GsAALcwmJRefVgkAbK+w1zPspvgFX/GBtMGyalf2iv1bSkgGb0pl5AhGcXxH6RvsNi8OTXEXhYxUTxj9rKcwvNLUFdbp4xGAMMOS83gqEZfoHIeUosA1q+r5pWV4ujWy+12RkrCDlGD7vXhc9X5wlKpM/PNiJqQ2mmYJrN0oWJ+wZ/yBji6qcHmIuUtJIaNWDywTx3T460ghLkWXov+I+m7k8LGV1MdAgX7IXOuyZDbUed2HGj5E3VRpg6iL//KJ+/0GQIuL0GXgep6w=
  - secure: P2WZwGDu7tAdWQPlkacmVkaDanlyz/Hw6ipxIB2rhKXLnaR2zNrpXAYbkltItCSK0XNBIMrpdQL4b9Egntt0Ri8rFExt1zHdZH8ogoMIdaLqhqUoBEdSrVmVGkHf5gbKWnAq4ZbQgfg19gkfPWoGp1ca0BsGocmMhIElDqJ6G6fM+9Lol/FOiBYBtAmTCk0ioR/HBT+GS1JTtrsVMTlu6Y2d3iTJd8Zu9yHHiE+efZNQ9rlrJd5eDPltYIt9bOftHDCG6BVio4IRzOG1PNisQF5OGuHFVcnS0lGAz6qI0AwLRTVNxjVl10M97cGAYl3eOL281ZAkNJ4tTlp559lMZZKdXl1/s75VU7AQloHOpa++L+dejGO0z1tB84Rj4eUEtJOxDvA8yTwAUOvhTxl1mAMeD6FjyLdM/8JjxTFUmwGTLOqlpL6PbZUMS5RZ7qU/+rJXPMyhejSrxfy1g5UI+/nOta9GCMr3mvEJkU1vAf5SZ5JewhJ1jrNhgq4iIqJ1pjscTychA4sfMpLupnaHTQSLtrtJQ5Mri3BaOVwDyio5Gzfy7Ve3Az4t0VqaHHWbQ22CSRX6ojiVSVjAUoxcn3PEGM+1s+2wzK5CuWBTK4nR8lfy7YbyKzg9Bywiz+CT8K6MQcrJ8iDfFVU9Lrl8ygT5RfDoAEEuVQyivrREg9E=

services:
  - docker

before_install:
  - sh docker/run-opendj.sh start

script:
  - SBT_OPTS=-Xmx3g sbt clean coverage test -Denv.type=test -Ddirectory.url=ldap://localhost:3389 -Ddirectory.password=testtesttest

after_success:
  - SBT_OPTS=-Xmx3g sbt coveralls
  - sh docker/run-opendj.sh stop
  - bash scripts/publish.sh
